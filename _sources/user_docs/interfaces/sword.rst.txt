
SWORD(v2)
=========

Die Datendrehscheibe bietet auch die Möglichkeit, Artikeldaten über die sogenannte
`SWORD-Schnittstelle (engl.) <https://en.wikipedia.org/wiki/SWORD_(protocol)>`_ zu verarbeiten.
Es wird die aktuelle Version ``v2`` angeboten.  Mehrfache Tests haben gezeigt, dass ``v2``
abwärtskombatible zu der älteren Fassung ``v1`` ist.  Das ``SWORD``-Protokoll wird,
genau wie die native Web-API von DeepGreen, über eine Basis-HTTP-Adresse, 
``https://oa-deepgreen.kobv.de/sword`` angesprochen, z.B. mit dem Kommando
`curl <https://curl.haxx.se>`_ in einer Shell (``bash``, ``tcsh``, etc.)::
 
  $ curl -k -s -u "<dg_username>:<api_key>" [-X GET|POST] https://oa-deepgreen.kobv.de/sword/...

Dabei werden in den nun nachfolgende Beispielen die ``...`` ersetzt durch die konkreten
Endpunkte ``validate``, ``notify``, ``collection`` und ``entry`` der SWORD-Schnittstelle.
Zwingend notwendig für einen erfolgreichen Verbindungsaufbau und -abwicklung ist dabei 
die Angabe eines gültigen DeepGreen-Kontonamens ``dg_username`` samt dessen API-Schlüssels 
``api_key``.  Ohne diese Angaben zur Authentifizierung wird der Verbindungsaufbau abgelehnt,
und man erhält keinen Zugang.  Im Folgenden soll der Übersichtlichkeit halber ``GET`` 
und ``POST`` für die gesamte, mit einer wie oben angegebene gültigen Kennung versehenen 
``curl``-Zeile geschrieben werden.  Hier ein kleiner Überblick der möglichen Aufrufe in 
dieser Kurzform:


* **Aufruf** :  ``GET /service-document``

  .. code-block:: rest
     :caption: Abfrage des SWORD-Servicedokuments, einer konkreten Beschreibung aller von DeepGreen angebotenen SWORD-Funktionalitäten

     GET /service-document


* **Aufruf** :  ``POST /collection/validate``

  .. code-block:: rest
     :caption: Überprüfung eines Artikeldatenpakets auf Syntax- oder sonstiger Fehler

     POST /collection/validate
     Content-Disposition: filename=article.zip
     Content-Type: application/zip
     Packaging: https://datahub.deepgreen.org/FilesAndJATS

     [binäre .zip-Datei]


* **Aufruf** :  ``POST /collection/notify``

  .. code-block:: rest
     :caption: Neue Artikeldaten an DeepGreen senden

     POST /collection/notify
     Content-Disposition: filename=article.zip
     Content-Type: application/zip
     Packaging: https://datahub.deepgreen.org/FilesAndJATS

     [binäre .zip-Datei]




Artikeldaten an DeepGreen liefern
---------------------------------


Artikeldaten von DeepGreen erhalten
-----------------------------------
